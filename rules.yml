version: "3.1"

rules:
  - rule: Greet
    steps:
      - intent: greet
      - action: utter_greet

  - rule: Start travel form
    steps:
      - intent: travel_start
      - action: travel_form
      - active_loop: travel_form

  # ✅ INTENT ХАМААРАХГҮЙ үргэлжлүүлэх (loop давтагдах гол асуудлыг багасгана)
  - rule: Continue travel form
    condition:
      - active_loop: travel_form
    steps:
      - action: travel_form

  - rule: Submit travel form
    condition:
      - active_loop: travel_form
    steps:
      - action: travel_form
      - active_loop: null
      - action: action_trip_summary

  - rule: Ask places
    steps:
      - intent: ask_places
      - action: action_places

  - rule: Ask accommodation
    steps:
      - intent: ask_accommodation
      - action: action_accommodation

  - rule: Ask weather
    steps:
      - intent: ask_weather
      - action: action_weather

  - rule: Ask transport
    steps:
      - intent: ask_transport
      - action: action_transport

  - rule: Ask safety
    steps:
      - intent: ask_safety
      - action: action_safety

  - rule: Ask cost
    steps:
      - intent: ask_cost
      - action: action_cost

  - rule: Goodbye
    steps:
      - intent: goodbye
      - action: utter_goodbye

  - rule: Thank you
    steps:
      - intent: thankyou
      - action: utter_thankyou

  - rule: Bot challenge
    steps:
      - intent: bot_challenge
      - action: utter_bot_challenge

  - rule: Fallback
    steps:
      - action: action_fallback
