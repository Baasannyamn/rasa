version: "3.1"

intents:
  - greet
  - help
  - goodbye
  - thankyou
  - reset
  - set_language

  - travel_start
  - provide_country
  - provide_days
  - provide_budget
  - provide_interest
  - provide_month

  - ask_places
  - ask_accommodation
  - ask_weather
  - ask_transport
  - ask_safety
  - ask_cost
  - detailed_breakdown

entities:
  - lang
  - country
  - days
  - budget
  - interest
  - month

slots:
  lang:
    type: text
    influence_conversation: true
    initial_value: "en"
    mappings:
      - type: from_entity
        entity: lang

  country:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: country
      - type: from_text
        conditions:
          - active_loop: travel_form
            requested_slot: country

  days:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: days
      - type: from_text
        conditions:
          - active_loop: travel_form
            requested_slot: days

  budget:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: budget
      - type: from_text
        conditions:
          - active_loop: travel_form
            requested_slot: budget

  interest:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: interest
      - type: from_text
        conditions:
          - active_loop: travel_form
            requested_slot: interest

  month:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: month
      - type: from_text
        conditions:
          - active_loop: travel_form
            requested_slot: month

forms:
  travel_form:
    required_slots:
      - country
      - days
      - budget
      - interest
      - month

responses:
  utter_ask_country:
    - text: "Та аль улсаас ирэх вэ? (ж: Япон, АНУ, Солонгос) / Which country are you coming from? (e.g., Japan, USA, Korea)"
  utter_ask_days:
    - text: "Хэдэн өдөр аялах вэ? (ж: 7, 10, 14) / How many days? (e.g., 7, 10, 14)"
  utter_ask_budget:
    - text: "Нийт төсөв ойролцоогоор хэд вэ? (ж: 500$, 2 сая₮) / What’s your budget? (e.g., $500, $1500)"
  utter_ask_interest:
    - text: "Сонирхол: байгаль / соёл / адал / тайван / Preference: nature / culture / adventure / quiet"
  utter_ask_month:
    - text: "Ямар сард ирэх вэ? (6 сар/7 сар/8 сар) / Which month? (June/July/August)"

  utter_reset_done:
    - text: "✅ Reset хийлээ. ‘аялал’ эсвэл ‘travel’ гэж бичээрэй."

actions:
  - action_greet
  - action_help
  - action_set_language
  - action_reset_routing

  - action_submit_travel_plan
  - action_answer_places
  - action_answer_accommodation
  - action_answer_weather
  - action_answer_transport
  - action_answer_safety
  - action_answer_cost
  - action_detailed_breakdown

  - action_fallback

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
